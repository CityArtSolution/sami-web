@extends('backend.layouts.app')@section('title'){{ __('messages.contect_cards_list') }} @endsection@push('after-styles')    <link rel="stylesheet" href="css/custom.css">@endpush@section('content')<style>        #appointment-button{            display:none;        }        * {            margin: 0;            padding: 0;            box-sizing: border-box;        }        body {            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;            background-color: #f8f9fa;            padding: 20px;        }                .form-check-input[type=checkbox]        Specificity: (0,2,0)         {            border-radius: 0.25em;        }        .table-container {            background: white;            border-radius: 8px;            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);            overflow: hidden;        }        .table-header {            background: linear-gradient(135deg, #d4af8c, #c09660);            padding: 20px;            color: white;            display: flex;            justify-content: space-between;            align-items: center;        }        .table-title {            font-size: 24px;            font-weight: 600;        }        .appointment-btn {            background: #2c3e50;            color: white;            border: none;            padding: 10px 20px;            border-radius: 6px;            font-size: 14px;            cursor: pointer;            display: flex;            align-items: center;            gap: 8px;        }        .appointment-btn:hover {            background: #34495e;        }        .table-controls {            padding: 20px;            background: #f8f9fa;            display: flex;            justify-content: space-between;            align-items: center;            border-bottom: 1px solid #e9ecef;        }        .control-group {            display: flex;            gap: 10px;            align-items: center;        }        .btn {            padding: 8px 16px;            border: 1px solid #ddd;            background: white;            border-radius: 4px;            cursor: pointer;            font-size: 14px;        }        .btn.active {            background: #2c3e50;            color: white;            border-color: #2c3e50;        }        .search-input {            padding: 8px 12px;            border: 1px solid #ddd;            border-radius: 4px;            width: 200px;        }        .new-btn {            background: #d4af8c;            color: white;            border: none;        }        .new-btn:hover {            background: #c09660;        }        .filter-btn {            background: white;            color: #666;        }        table {            width: 100%;            border-collapse: collapse;            font-size: 14px;        }        th {            background: #f8f9fa;            padding: 12px;            text-align: left;            font-weight: 600;            color: #666;            border-bottom: 1px solid #e9ecef;        }        td {            padding: 12px;            border-bottom: 1px solid #f1f3f4;            vertical-align: middle;        }        tr:hover {            background-color: #f8f9fa;        }        .service-image {            width: 32px;            height: 32px;            border-radius: 4px;            object-fit: cover;        }        .service-name {            display: flex;            align-items: center;            gap: 10px;        }        .price {            font-weight: 600;            color: #333;        }        .category-tag {            color: #666;            font-size: 13px;        }        .branch-count, .staff-count {            background: #d4af8c;            color: white;            padding: 4px 8px;            border-radius: 4px;            font-size: 12px;            font-weight: 600;            display: inline-flex;            align-items: center;            gap: 4px;        }        .status-toggle {            position: relative;            width: 44px;            height: 24px;            background: #d4af8c;            border-radius: 12px;            cursor: pointer;            transition: background 0.3s;        }        .status-toggle::after {            content: '';            position: absolute;            width: 18px;            height: 18px;            border-radius: 50%;            background: white;            top: 3px;            right: 3px;            transition: transform 0.3s;        }        .action-buttons {            display: flex;            gap: 8px;        }        .action-btn {            width: 32px;            height: 32px;            border: none;            border-radius: 4px;            cursor: pointer;            display: flex;            align-items: center;            justify-content: center;        }        .view-btn { background: #3498db; color: white; }        .edit-btn { background: #f39c12; color: white; }        .delete-btn { background: #e74c3c; color: white; }        .checkbox {            width: 13px;            height: 13px;            accent-color: #d4af8c;        }        th {            text-align:center;        }        td {            text-align:center;        }        th.Date {            position: relative;            cursor:pointer        }        th.Date:before {          content: "▲";           position: absolute;          right: 10px;          bottom: 50%;          font-size: 0.8em;          line-height: 9px;          opacity: 0.125;          display: block;        }        th.Date:after {          content: "▼";           position: absolute;          right: 10px;          top: 50%;          font-size: 0.8em;          line-height: 9px;          opacity: 0.125;          display: block;        }        .DA{          color:black;        }        /* أنيميشن المودال */        .custom-modal .modal-dialog {            transform: scale(0.7);            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);        }                .custom-modal.show .modal-dialog {            transform: scale(1);        }                .custom-modal .modal-content {            border: none;            border-radius: 20px;            box-shadow: 0 20px 60px rgba(0,0,0,0.3);            overflow: hidden;        }                /* هيدر المودال */        .bg-gradient-primary {            background: linear-gradient(135deg, #bf9456 0%, #836436 100%);        }                .avatar-circle {            width: 50px;            height: 50px;            border-radius: 50%;            background: rgba(255,255,255,0.2);            display: flex;            align-items: center;            justify-content: center;            color: white;            font-size: 20px;        }                /* زر الرد مع أنيميشن */        .reply-btn {            position: relative;            overflow: hidden;            transition: all 0.3s ease;            border-radius: 25px;            padding: 8px 20px;        }                .reply-btn:hover {            transform: translateY(-2px);            box-shadow: 0 5px 15px rgba(0,0,0,0.2);        }                .btn-ripple {            position: absolute;            border-radius: 50%;            background: rgba(255,255,255,0.6);            transform: scale(0);            animation: ripple 0.6s linear;            pointer-events: none;        }                @keyframes ripple {            to {                transform: scale(4);                opacity: 0;            }        }                /* حقل النص */        .form-control-lg {            border-radius: 15px;            border: 2px solid #bf9456;            transition: all 0.3s ease;        }                .form-control-lg:focus {            border-color: #667eea;            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);        }                /* رسالة العميل */        .message-content {            border-left: 4px solid #bf9456;            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);        }                /* زر الإرسال */        .btn-send-reply {            border-radius: 25px;            padding: 10px 25px;            transition: all 0.3s ease;        }                .btn-send-reply:hover {            transform: translateY(-2px);            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);        }                /* أنيميشن التحميل */        .spinner-border {            animation: spin 1s linear infinite;        }                @keyframes spin {            0% { transform: rotate(0deg); }            100% { transform: rotate(360deg); }        }    </style><div class="card">    <div class="card-body">        <h3 class="mb-4" style="text-align: center;">{{ __('messages.contect_cards_list') }}</h3>        <form action="{{route('admin.contact-messages.bulk-action')}}" method="POST" id="quick-action-fm" class="d-flex gap-3 align-items-stretch flex-md-row flex-column">            @csrf            <div style="display: flex;position: absolute;top: 11px;"><div>            <select name="action_type" class="form-control select2 col-12" id="quick-action-type" style="width:100%">                <option value="" data-select2-id="select2-data-126-s8km">{{ __('messages.no_action') }}</option>                <option value="delete">{{ __('messages.delete') }}</option>            </select>          </div>          <button class="btn btn-primary" id="quick-action" disabled>{{ __('messages.apply') }}</button>        </div>            <!-- Table -->        <table>            <thead>            <tr>                <th><input type="checkbox" class="checkbox form-check-input" id="selectAll"></th>                <th>{{ __('messages.name') }}</th>                <th>{{ __('messages.email') }}</th>                <th>{{ __('messages.phone') }}</th>                <th>{{ __('messages.message') }}</th>                <th class="Date">                  <a class="DA" href="{{ request()->fullUrlWithQuery(['srt' => request('srt') == 'ASC' ? 'DESC' : 'ASC']) }}">                    {{ __('messages.date') }}                  </a>                </th>                <!--<th>{{ __('messages.action') }}</th>-->            </tr>            </thead>            <tbody>            @forelse ($messages as $message)                <tr>                    <td><input type="checkbox" class="checkbox form-check-input item-checkbox" name="masseges_ids[]"  value="{{ $message->id }}"></td>        </form>                    <td>{{ $message->name }}</td>                    <td>{{ $message->email }}</td>                    <td>{{ $message->phone }}</td>                    <td>{{ \Illuminate\Support\Str::limit($message->message, 50) }}</td>                    <td>{{ $message->created_at->format('d-m-y h:m') }}</td>                    <td>                        <!-- Modal -->                        <!-- زر الرد مع أنيميشن -->                        <!--<button type="button" class="btn btn-primary reply-btn" -->                        <!--        data-bs-toggle="modal" -->                        <!--        data-bs-target="#replyModal-{{ $message->id }}"-->                        <!--        data-message-id="{{ $message->id }}">-->                        <!--    <i class="fas fa-reply me-2"></i>-->                        <!--    <span class="btn-text">{{ __('messages.reply') }}</span>-->                        <!--    <div class="btn-ripple"></div>-->                        <!--</button>-->                        <!-- المودال المحسن -->                        <div class="modal fade custom-modal"                              id="replyModal-{{ $message->id }}"                              tabindex="-1"                              aria-labelledby="replyModalLabel-{{ $message->id }}"                              aria-hidden="true">                                                        <div class="modal-dialog modal-dialog-centered modal-lg">                                <div class="modal-content">                                    <!-- الهيدر -->                                    <div class="modal-header bg-gradient-primary">                                        <div class="d-flex align-items-center">                                            <div class="avatar-circle me-3">                                                <i class="fas fa-user"></i>                                            </div>                                            <div>                                                <h5 class="modal-title text-white mb-0" id="replyModalLabel-{{ $message->id }}">                                                    {{ __('messages.reply_to') }} {{ $message->email }}                                                </h5>                                                <small class="text-white-50">{{ __('messages.send_your_reply_now') }}</small>                                            </div>                                        </div>                                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>                                    </div>                                    <!-- المحتوى -->                                    <form action="{{ route('admin.contact-messages.reply', $message->id) }}" method="POST" class="reply-form">                                        @csrf                                        <div class="modal-body p-4">                                            <!-- رسالة العميل الأصلية -->                                            <div class="original-message mb-4">                                                <h6 class="text-muted mb-2">                                                    <i class="fas fa-quote-left me-2"></i>                                                    {{ __('messages.client_message') }}                                                </h6>                                                <div class="message-content p-3 bg-light rounded">                                                    <p class="mb-0">{{ $message->message }}</p>                                                </div>                                            </div>                                            <!-- حقل الرد -->                                            <div class="reply-field">                                                <label for="replyMessage-{{ $message->id }}" class="form-label fw-bold">                                                    <i class="fas fa-edit me-2"></i>                                                   {{ __('messages.your_reply') }}                                                </label>                                                <textarea name="message"                                                           id="replyMessage-{{ $message->id }}"                                                           class="form-control form-control-lg"                                                           rows="6"                                                           placeholder="{{ __('messages.write_your_reply_here') }}"                                                          required></textarea>                                                <div class="char-counter mt-2 text-muted">                                                    <small>0 {{ __('messages.letter') }}</small>                                                </div>                                            </div>                                        </div>                                        <!-- الفوتر -->                                        <div class="modal-footer bg-light">                                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">                                                <i class="fas fa-times me-2"></i>                                                {{ __('messages.cancel') }}                                            </button>                                            <button type="submit" class="btn btn-primary btn-send-reply">                                                <i class="fas fa-paper-plane me-2"></i>                                                <span class="btn-text">{{ __('messages.send_reply') }}</span>                                                <div class="spinner-border spinner-border-sm ms-2 d-none" role="status">                                                    <span class="visually-hidden">{{ __('messages.sending') }}</span>                                                </div>                                            </button>                                        </div>                                    </form>                                </div>                            </div>                        </div>                    </td>                </tr>            @empty                <tr>                    <td colspan="6" style="text-align: center;">{{ __('messages.no_messages_found') }}</td>                </tr>            @endforelse            </tbody>        </table>    </div></div><script>let selectAll = document.getElementById('selectAll');const filterBtn = document.getElementById('quick-action');const checkboxes = document.querySelectorAll('.item-checkbox');function updateSelectAllAndButton() {  const checkedCount = Array.from(checkboxes).filter(chk => chk.checked).length;  const totalCount = checkboxes.length;  filterBtn.disabled = checkedCount === 0;  selectAll.checked = checkedCount === totalCount;  selectAll.indeterminate = checkedCount > 0 && checkedCount < totalCount;}selectAll.addEventListener('change', function() {  checkboxes.forEach(chk => {    chk.checked = this.checked;  });  updateSelectAllAndButton();});checkboxes.forEach(chk => {  chk.addEventListener('change', updateSelectAllAndButton);});updateSelectAllAndButton();</script><script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script><script> @if(session('success'))  Swal.fire({    icon: 'success',    title: 'Success',    text: '{{ session("success") }}',  });@endif</script><script>document.addEventListener('DOMContentLoaded', function() {    // عداد الأحرف    const textareas = document.querySelectorAll('textarea[name="message"]');    textareas.forEach(textarea => {        const counter = textarea.parentNode.querySelector('.char-counter');        textarea.addEventListener('input', function() {            const count = this.value.length;            counter.textContent = count + "حرف ";        });    });    // أنيميشن زر الرد    const replyBtns = document.querySelectorAll('.reply-btn');    replyBtns.forEach(btn => {        btn.addEventListener('click', function(e) {            const ripple = this.querySelector('.btn-ripple');            const rect = this.getBoundingClientRect();            const size = Math.max(rect.width, rect.height);            const x = e.clientX - rect.left - size / 2;            const y = e.clientY - rect.top - size / 2;                        ripple.style.left = x + 'px';            ripple.style.top = y + 'px';            ripple.style.width = size + 'px';            ripple.style.height = size + 'px';                        ripple.style.animation = 'none';            ripple.offsetHeight;            ripple.style.animation = 'ripple 0.6s linear';        });    });    // معالجة النموذج    const forms = document.querySelectorAll('.reply-form');    forms.forEach(form => {        form.addEventListener('submit', function(e) {            const submitBtn = this.querySelector('.btn-send-reply');            const spinner = submitBtn.querySelector('.spinner-border');            const btnText = submitBtn.querySelector('.btn-text');                        // إظهار التحميل            spinner.classList.remove('d-none');            btnText.textContent =  __('messages.sending');            submitBtn.disabled = true;        });    });});</script>@endsection